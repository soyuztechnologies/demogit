sap.ui.define(["emc/fin/ar/anubhav/controller/BaseController","emc/fin/ar/anubhav/util/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/m/MessageBox","sap/ui/core/Fragment"],function(e,t,o,r,i,n,a,s){"use strict";return e.extend("emc.fin.ar.anubhav.controller.View1",{formatter:t,onInit:function(){this.oRouter=this.getOwnerComponent().getRouter();this.oLocalModel=new i;this.oLocalModel.setData({productData:{ProductId:"JU-1010",TypeCode:"PR",Category:"Notebooks",Name:"Notebook Professional 15",Description:"My product Anubhav",SupplierId:"100000051",SupplierName:"TECUM",TaxTarifCode:1,MeasureUnit:"EA",Price:"2333.0000",CurrencyCode:"EUR",DimUnit:"CM"}});this.getView().setModel(this.oLocalModel,"data")},productId:null,onEnter:function(e){this.productId=e.getParameter("value");var t=this.getView().getModel();var o=this;t.read("/ProductSet('"+this.productId+"')",{success:function(e){o.oLocalModel.setProperty("/productData",e)},error:function(e){a.error("Dude there is a situation here!")}})},onLoad:function(e){var t=this.getView().getModel();var o=this;t.callFunction("/GetMostExpensiveProduct",{urlParameters:{I_CATEGORY:"Notebooks"},success:function(e){o.oLocalModel.setProperty("/productData",e)},error:function(e){a.error("Dude there is a situation here!")}})},onDelete:function(){var e=this.getView().getModel();var t=this;e.remove("/ProductSet('"+this.productId+"')",{success:function(e){n.show("Product has been deleted now")},error:function(e){a.error("Dude there is a situation here!")}})},inpField:null,oSupplierPopup:null,onSupplierF4:function(e){this.inpField=e.getSource();if(!this.oSupplierPopup){s.load({name:"emc.fin.ar.anubhav.fragments.popup",controller:this,id:"idSuppliers"}).then(this.onCallBackCity.bind(this))}else{this.oSupplierPopup.open()}},onCallBackCity:function(e){debugger;this.oSupplierPopup=e;this.getView().addDependent(this.oSupplierPopup);this.oSupplierPopup.bindAggregation("items",{path:"/SupplierSet",template:new sap.m.StandardListItem({icon:"sap-icon://home",title:"{BP_ID}",description:"{COMPANY_NAME}"})});this.oSupplierPopup.setTitle("Suppliers");this.oSupplierPopup.setMultiSelect(false);this.oSupplierPopup.open()},onConfirm:function(e){var t=e.getParameter("id");debugger;if(t.indexOf("idSuppliers")!==-1){var o=e.getParameter("selectedItem");var r=o.getTitle();this.inpField.setValue(r)}},onSave:function(){var e=this.getView().getModel();var t=this.oLocalModel.getProperty("/productData");e.create("/ProductSet",t,{success:function(e){n.show("Product has been created successfully!")},error:function(e){console.log(e);a.error(JSON.parse(e.responseText).error.innererror.errordetails[0].message)}})}})});